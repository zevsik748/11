<!doctype html><html lang="ru"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ferixdi AI — наставник по Veo 3.1 и Google Flow</title>
<style>
body{font-family:system-ui,Arial,sans-serif;background:#0b0f19;color:#e6eaf2;margin:0}
.wrap{max-width:820px;margin:40px auto;padding:0 16px}
.card{background:#121829;border:1px solid #1f2a44;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.3);padding:20px}
.msg{white-space:pre-wrap;margin:10px 0;padding:12px;border-radius:12px}
.u{background:#1f2a44}.b{background:#0f1222;border:1px solid #1f2a44}
textarea{width:100%;min-height:80px;background:#0b0f19;color:#e6eaf2;border:1px solid #1f2a44;border-radius:12px;padding:12px;outline:none}
button{margin-top:8px;padding:10px 16px;border:none;border-radius:10px;background:#3b82f6;color:#fff;cursor:pointer}
button:disabled{opacity:.6;cursor:not-allowed}
.small{opacity:.7;font-size:13px}
.suggestions{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
.suggestions button{background:#1f2a44;border-radius:8px;padding:8px 12px;border:1px solid #273249;color:#e6eaf2;cursor:pointer}
</style></head><body><div class="wrap">
<h2>Ferixdi AI — наставник по Veo 3.1 и Google Flow</h2>
<div class="card">
  <div id="chat"></div>
  <div class="suggestions" id="sugg"></div>
  <textarea id="inp" placeholder="Напишите вопрос…"></textarea>
  <button id="send">Отправить</button>
  <div class="small">KB: Google Sheets CSV • Модель: KIE.ai • Эндпоинты: /health, /api/chat, /telegram</div>
</div>
</div>
<script>
const chat = document.getElementById('chat');
const inp = document.getElementById('inp');
const btn = document.getElementById('send');
const sugg = document.getElementById('sugg');
function add(role, text){
  const div=document.createElement('div');
  div.className='msg '+(role==='user'?'u':'b');
  div.textContent=text; chat.appendChild(div); chat.scrollTop=chat.scrollHeight;
}
async function loadSuggestions(){
  try{
    const r = await fetch('/api/suggestions');
    const j = await r.json();
    sugg.innerHTML = '';
    (j.suggestions || []).forEach(s=>{
      const b = document.createElement('button'); b.textContent = s; b.onclick = ()=>{ inp.value = s; };
      sugg.appendChild(b);
    });
  }catch(e){ console.warn('sugg err', e); }
}
btn.onclick = async ()=>{
  const t = inp.value.trim(); if(!t) return;
  add('user', t); inp.value=''; btn.disabled=true;
  try{
    const r = await fetch('/api/chat',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({text:t})});
    const j = await r.json();
    add('bot', j.reply || 'Пустой ответ.');
  }catch(e){ add('bot','⚠️ Ошибка сети. Попробуйте ещё раз.'); }
  btn.disabled=false;
};
loadSuggestions();
</script></body></html>
